

(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["custom"],{"00d6":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAkCAYAAACe0YppAAAAAXNSR0IArs4c6QAAAYVJREFUWAntWEtug0AMZVAukXt026j73qE74ALtplWzQFXVKCfgs+pJInWbe/QQEdBnxIwcQzKuEO0CkNDM2M9++DEIjAmUR1EUt3VdPwF+g3Mtwr6xPoZhuI+i6Ev4Bpdm0CqMIH1umuYNpw9fg/wV5O8iRW/pSxSUZblBpQdEnnBuQf6ZJAlV6I4sy9bGmAcYUvhXIL/zVb5y0RcmVVU9woW8ZhvH8W4I1l3ILs9zcn90t+Sq5OFQImGjexpQpcLeWzJMG9MDMIOGuN1IUl6Ww00ZRm4+h7ETg/vT2MVfjpqKp70eqnzK6mX+f6t4IZ52I7Hsi9RMjGmnaqnlcygvy+eXeDWxDBy7XojHKqiOX6RWSzUWOD+pvZ+3VlJ8yF39Bvf5bR47zk/qeVfcNmJ4vXm7ALtBtCPL6Zo9LvWREnVdnzanCsdythwU5B4naqrR5d3DllLXN9SOqlgYiCrtSFOYqXfeW/fZswngCxwE4kpY7Jix17CfEVNmzy+H35Jf/EXxAzajidnBStciAAAAAElFTkSuQmCC"},"0c4e":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"shop-custom"},[e._m(0),r("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-position":"top"}},[r("div",{staticClass:"shop-custom-type"},[r("Type",{attrs:{form:e.form}})],1),r("div",{staticClass:"shop-custom-source"},[r("Source",{attrs:{form:e.form,id:e.id}})],1),r("div",{staticClass:"custom-button-container"},[r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.id,expression:"id"}],staticClass:"shop-submit cancel-button shop-btn--white",on:{click:function(t){return e.$router.back()}}},[e._v("\n        返回\n      ")]),r("el-button",{staticClass:"shop-submit",attrs:{type:"primary",loading:e.loading},on:{click:function(t){!e.id&&e.handleTrackClick(20),e.handleSubmit()}}},[e._v(e._s(e.id?"修改":"提交"))])],1)])],1)},s=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"shop-custom-header"},[o("div",{staticClass:"shop-custom-title"},[e._v("定制资源")]),o("div",{staticClass:"shop-custom-download"},[o("img",{attrs:{src:r("58bb")}}),o("span",[o("a",{attrs:{target:"_blank",href:"https://file-grom.coloros.com/b1f4d03b/b4c7d24f10a03a5fa106778fed332473.docx"}},[e._v("下载操作手册")])])])])}],n=(r("8e6e"),r("456d"),r("7514"),r("ac6a"),r("bd86")),i=(r("c5f6"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"type-version"},[r("Item",{attrs:{label:"资源名称",description:"仅用于您在商城管理/识别不同的定制需求",prop:"resourceName"}},[r("el-input",{attrs:{placeholder:"请输入资源名称"},model:{value:e.form.resourceName,callback:function(t){e.$set(e.form,"resourceName","string"===typeof t?t.trim():t)},expression:"form.resourceName"}})],1),r("Item",{attrs:{label:"版本号",description:"“版本号”即定制手机版本号，在您的手机升级为定制版本后，可在设置模块查看，由中文、英文、数字等最长48个字符组成，示例：OPPO定制V1.0",prop:"version"}},[r("el-input",{attrs:{maxlength:48,placeholder:"请输入版本号"},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version","string"===typeof t?t.trim():t)},expression:"form.version"}})],1),r("Item",{attrs:{label:"机型",prop:"category"}},[r("el-select",{attrs:{placeholder:"请选择系列",disabled:e.isEdit},on:{change:e.handleChangeCategory},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.category,(function(e,t){return r("el-option",{key:e.id,attrs:{label:e.categoryName,value:t}})})),1)],1),r("Item",{ref:"spu",staticClass:"type-version-item",attrs:{label:"",prop:"spuId"}},[r("el-select",{attrs:{placeholder:"请选择机型",disabled:e.isEdit},on:{change:e.handleChangeSpu},model:{value:e.form.spuId,callback:function(t){e.$set(e.form,"spuId",t)},expression:"form.spuId"}},e._l(e.spuList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.productName,value:e.id}})})),1)],1)],1)}),a=[],c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-item"},[r("el-form-item",{ref:"item",attrs:{label:e.label,prop:e.prop}},[e._t("default")],2),r("div",{staticClass:"form-item-description"},[e._v(e._s(e.description))])],1)},u=[],l={props:{label:{type:String,default:""},description:{type:String,default:""},prop:{type:String,default:""}}},p=l,f=(r("5316"),r("2877")),m=Object(f["a"])(p,c,u,!1,null,"1554afc6",null),d=m.exports,g=r("2f62");function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(r,!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y={props:{form:{type:Object,default:function(){return{}}}},components:{Item:d},computed:h({},Object(g["e"])("custom",["category"]),{categoryIndexMap:function(){var e={};return this.category.forEach((function(t,r){t.spuList.forEach((function(t){e[t.id]=r}))})),e},spuList:function(){return null!==this.form.category&&this.category[this.form.category]?this.category[this.form.category].spuList:[]},isEdit:function(){return null!=this.$route.query.id}}),watch:{"form.spuId":function(e){null!==e&&(this.form.category=this.categoryIndexMap[e])}},methods:{handleChangeCategory:function(){this.form.spuId=null},handleChangeSpu:function(){this.$refs.spu.$refs.item.clearValidate()}}},v=y,O=(r("d879"),Object(f["a"])(v,i,a,!1,null,"9339d512",null)),j=O.exports,w=r("a393"),C=r("29cc"),I=r("8e64");function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(r,!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E={props:{id:{type:[String,Number],default:""}},mixins:[C["a"]],components:{Type:j,Source:w["a"]},data:function(){return{loading:!1,form:{resourceName:null,version:null,spuId:null,category:null,siList:[]},rules:{resourceName:[{required:!0,message:"请输入资源名称",trigger:"blur"}],version:[{required:!0,message:"请输入版本号",trigger:"blur"},{}],category:[{required:!0,message:"请选择系列",trigger:"change"}],spuId:[{required:!0,message:"请选择机型",trigger:"blur"}]}}},watch:{"form.version":function(e){this.form.version=e.substring(0,48)}},computed:k({},Object(g["c"])("custom",["detailList"])),mounted:function(){var e=this;this.id?this.getCategorySpu().then((function(){e.getResourceDetail(e.id).then((function(t){var r=t.data,o=r.resourceName,s=r.version,n=r.spuId,i=r.siList;i.forEach((function(e){e.isOrigin=!0})),e.form={resourceName:o,version:s,spuId:n,siList:i,category:null}}))})):this.getCategorySpu()},methods:k({},Object(g["b"])("custom",["getResourceDetail","getCategorySpu"]),{handleSubmit:function(){var e=this;this.detailList.find((function(e){return"上传中..."===e.resourceValue}))?this.$message({type:"error",message:"资源正在上传中，请稍等~"}):this.$refs["ruleForm"].validate((function(t,r){if(!t&&r[Object.keys(r)[0]][0].message)e.$message.error(r[Object.keys(r)[0]][0].message);else if(t){e.loading=!0;var o=e.form,s=o.resourceName,n=o.version,i=o.spuId,a=o.siList;I["a"].uploadResource({id:e.id,resourceName:s,version:n,spuId:i,siList:a.filter((function(e){return e.siId&&!e.isOrigin})),detailList:e.detailList.filter((function(e){return null!==e.keyType}))}).then((function(){e.$msgbox({type:"success",title:" ",closeOnClickModal:!1,customClass:"shop-messageBox",showConfirmButton:!1,message:"您的定制资源已提交成功，请等待审核~"}).then(null,(function(t){"cancel"===t&&(e.id?e.$router.back():e.$router.push({name:"resourceOrder"}))}))}),(function(){e.$msgbox({type:"error",title:" ",closeOnClickModal:!1,customClass:"shop-messageBox",showConfirmButton:!1,message:"您的定制资源提交失败，请稍后再试~"})})).finally((function(){return e.loading=!1}))}}))}})},P=E,S=(r("3333"),Object(f["a"])(P,o,s,!1,null,"2f458767",null));t["default"]=S.exports},"29cc":function(e,t,r){"use strict";r("8e6e"),r("ac6a"),r("456d");var o=r("bd86"),s=r("2f62");function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(r,!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t["a"]={computed:i({},Object(s["e"])({trackLoginInfo:function(e){return e.user.loginInfo}})),methods:i({},Object(s["b"])("track",["emitTrackEvent"]),{handleTrackClick:function(e,t){if(this.trackLoginInfo.status){var r=[];t&&r.push({name:"spu_id",value:t}),this.emitTrackEvent({eventId:e,paramMap:r})}}})}},3333:function(e,t,r){"use strict";var o=r("db1b"),s=r.n(o);s.a},5316:function(e,t,r){"use strict";var o=r("f988"),s=r.n(o);s.a},"67bb":function(e,t,r){},d879:function(e,t,r){"use strict";var o=r("67bb"),s=r.n(o);s.a},db1b:function(e,t,r){},f988:function(e,t,r){}}]);
//# sourceMappingURL=custom.6d431f4d.js.map


